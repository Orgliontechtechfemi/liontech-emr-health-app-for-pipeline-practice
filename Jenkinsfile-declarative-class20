pipeline{

    agent any
    tools {

        maven "maven3.9.2"
    }

    stages {
        stage('clonefromsourcecode'){
            steps{
                sh "echo 'clone latest code from github'"
                sh "echo 'build  developing for dev environment '"
                git 'https://github.com/Lion-Technology-Solutions/liontech-emr-health-app.git'
            }
        }

        stage('Test+build+package'){
            steps{

                sh "echo 'running sonarqube code quality analysis'"
                sh "echo 'class20 devops engineers develop pipelines'"
                sh "echo 'testing must passoed inorder to pacjage application'"
                sh  "install"
                sh  "validate"
                sh   "test"
                sh   "clean package"
            }
        }
        stage('codequality'){
            steps{
                sh  "echo 'performing codequality analysis'"
                sh   "sonar:sonar"
            }
        }

        stage('upload2nexus'){
            steps{
                sh  "deploy"
            }
        }


    }

}